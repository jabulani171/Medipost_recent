<h3 class="text-center"><b class="text-danger">BATCH FULL DETAILS</b></h3>

  
  <div class="clearfix"></div>
  {{#Granted}}
  <div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
    <div class="x_panel">
      <div class="x_title">
      <h2><small>Detail records for batch order</small></h2>
      <div class="clearfix"></div>
      </div>
      <div class="x_content">
      <table width="100%" id="batch-detail-datatable" class="table table-striped jambo_table table-bordered nowrap">
        <thead>
          <tr>
                    <th>Production_Batch</th>
                   
                    <th>Print_Batch</th>
                    <th>Status</th>
                    <th></th>
                    <th>Client_Name</th>
                    <th>Client_Address</th>
                    <th>Double_Dispensing_Indicator</th>
                    <th>Date_Dispensed</th>
                    <th>Script_Number</th>
                    <th>Item_Count</th>
                    <th>Drug_Description</th>
                    <th>Dosage_Line_1</th>
                    <th>Dosage_Line_2</th>
                    <th>Dosage_Line_3</th>
                    <th>Dosage_Line_4</th>
                    <th>Title</th>
                    <th>Initials</th>
                    <th>Surname</th>
                    <th>Repeat</th>
                    <th>Pharmacist</th>
                    <th>File_No </th>
                    <th>Batch</th>
                    <th>Expiry</th>
                    <th>Lane</th>
                    <th>FCY</th>
                    <th>SQ</th>
                    <th>Order_No</th>
                    <th>Line_No</th>
                    <th>Hospital_Ref</th>
                    <th>Production_Batch_1</th>
                    <th>Production_Batch_2</th>
                    <th>Production_Expiry</th>
                    <th>Name</th>
                    <th>Fridge</th>
                    <th>SSEQ</th>
                    <th>Date_Of_Birth</th>
                    <th>Cell_No</th>
                    <th>ID_Number</th>
                    <th>Collection_Date</th>
                    <th>Next_Collection_Date</th>
                    <th>Collection_Point</th>
                    <th>Profile_No</th>
                    <th>Repeat_Notice</th>
                    <th>Following_Items_Not_Included</th>
                    <th>Line_1</th>
                    <th>Line_2</th>
                    <th>Line_3</th>
                    <th>Line_4</th>
                    <th>Facility_Review</th>
                    <th>Parcel_Ref</th>
                    <th>Collection_Point_Ref</th>
                    <th>MpNo</th>
                    <th>Hub</th>
                    <th>Zone</th>
                    <th>Second_Rx_Ref</th>
                    <th>Parcel_Reference_Number</th>
                    <th>MAN_SEQ</th>
                    <th>SEQUENCE</th>
                   
                    <th>CCMDD</th>
                    <th>Proxy_Name_1</th>
                    <th>Proxy_1_ID</th>
                    <th>Proxy_Name_2</th>
                    <th>Proxy_2_ID</th>
                    <th>WCSStatus</th>
                    <th>Created_at</th>
                    <th>Updated_at</th>
                  </tr>
              </thead>
              <tbody>
              </tbody>
          </table>
        </div>
      </div>
    </div>
   </div>
   {{/Granted}}
   {{^Granted}}
   <div class="row">
    <div class="jumbotron">
      <div class="col-sm-12">
        <div style="text-align:center;"><h4 class="text-danger"><b>USER NOT AUTHORIZED</b></h4></div>
      </div>
    </div>
   </div>
   {{/Granted}}
  <script type="text/javascript">
      var oTable;
      $(document).ready(function() {
        let MyId = '{{Filter}}';
		var Url = '/API/DTGetBatchFullDetails';
		if(MyId){
		 	Url += '?id=' + MyId;
		}
  
          oTable = $('#batch-detail-datatable').DataTable({
            "order": [[0, "asc"]],
            "paging": true,
            "pageLength": 10,
            "processing": true,
            "serverSide": true,
            'ajax': {
                'type': 'POST',
                'url': Url,
            },
              'columns':
                  [
{ 'data': 'Production_Batch' },
{ 'data': 'Print_Batch'},
{'data':'Status'},
{'data':'addReprint', 'render': BHAddReprint },
{ 'data': 'Client_Name'},
{ 'data': 'Client_Address'},
{ 'data': 'Double_Dispensing_Indicator','render': FixData},
{ 'data': 'Date_Dispensed'},
{ 'data': 'Script_Number'},
{ 'data': 'Item_Count' },
{ 'data': 'Drug_Description' },
{ 'data': 'Dosage_Line_1'},
{ 'data': 'Dosage_Line_2'},
{ 'data': 'Dosage_Line_3'},
{ 'data': 'Dosage_Line_4'},
{ 'data': 'Title' },
{ 'data': 'Initials' },
{ 'data': 'Surname'},
{ 'data': 'Repeat'},
{ 'data': 'Pharmacist'},
{ 'data': 'File_No'},
{ 'data': 'Batch' },
{ 'data': 'Expiry' },
{ 'data': 'Lane'},
{ 'data': 'FCY'},
{ 'data': 'SQ'},
{ 'data': 'Order_No'},
{ 'data': 'Line_No' },
{ 'data': 'Hospital_Ref' },
{ 'data': 'Production_Batch_1'},
{ 'data': 'Production_Batch_2'},
{ 'data': 'Production_Expiry'},
{ 'data': 'Name' },
{ 'data': 'Fridge' },
{ 'data': 'SSEQ'},
{ 'data': 'Date_Of_Birth'},
{ 'data': 'Cell_No'},
{ 'data': 'ID_Number'},
{ 'data': 'Collection_Date' },
{ 'data': 'Next_Collection_Date'},
{ 'data': 'Collection_Point'},
{ 'data': 'Profile_No'},
{ 'data': 'Repeat_Notice'},
{ 'data': 'Following_Items_Not_Included'},
{ 'data': 'Line_1'},
{ 'data': 'Line_2'},
{ 'data': 'Line_3' },
{ 'data': 'Line_4' },
{ 'data': 'Facility_Review'},
{ 'data': 'Parcel_Ref'},
{ 'data': 'Collection_Point_Ref'},
{ 'data': 'MpNo' },
{ 'data': 'Hub'},
{ 'data': 'Zone'},
{ 'data': 'Second_Rx_Ref'},
{ 'data': 'Parcel_Reference_Number' },
{ 'data': 'MAN_SEQ'},
{ 'data': 'SEQUENCE'},
{'data':'CCMDD'},
{'data':'Proxy_Name_1'},
{'data':'Proxy_1_ID'},
{'data':'Proxy_Name_2'},
{'data':'Proxy_2_ID'},
{'data':'WCSStatus'},
{ 'data': 'created_at'},
{ 'data': 'updated_at'}
              ]
          })
      });
  
  var FixData= function(data,type,full,meta){
    let Render = (full.Double_Dispensing_Indicator).substr(2).replace(">>","");
    
    return Render;
  }
      
  var BHAddReprint = function (data, type, full, meta) {
    var Render = '';

  
  if(full.Status === 'Printed' ){
    Render = '<button type="button" class="open-Start btn btn-info" data-toggle="modal" data-target="#StartModal" data-id="' + full.Production_Batch + '">Reprint</button>';
   
  }
      return Render;
  }
          
  </script>
  